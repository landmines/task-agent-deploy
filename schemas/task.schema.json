{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["task"],
  "properties": {
    "task": {
      "type": "object",
      "required": ["intent", "filename"],
      "properties": {
        "intent": {
          "type": "string",
          "enum": [
            "create_file",
            "append_to_file",
            "replace_line",
            "insert_below",
            "patch_code"
          ]
        },
        "filename": {
          "type": "string",
          "pattern": "^[^/\\\\][\\w\\-. ]+$"
        },
        "content":     { "type": "string" },
        "target":      { "type": "string" },
        "replacement": { "type": "string" },
        "new_line":    { "type": "string" },
        "after_line":  { "type": "string" },
        "function":    { "type": "string" },
        "new_code":    { "type": "string" }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
